scripted_gui = {

	government_main_container = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "government_main_container"
		visible = {
			always = yes
		}
		effects= {
			leader_frame2_click = {
				if = {
					limit = {
						check_variable = { government_button_open = 1 }
					}
					set_variable = { government_button_open = 0 }
				}
				else = {
					set_variable = { government_button_open = 1 }
				}
			}
		}
	}
	government_main_window = {
		context_type = player_context
		window_name = "government_main_window"
		visible = {
			check_variable = { government_button_open = 1 }
		}
		effects= {
			close_button_window_click = {
				set_variable = { government_button_open = 0.0 } 
			}
			head_of_state_portrait_click = {
				if = {
					limit = {
						check_variable = { minister_choice_button_open = 1 }
					}
					set_variable = { minister_choice_button_open = 0.0 } 
					else = {
						limit = {
							check_variable = { minister_choice_button_open > 1 }
						}
						set_variable = { minister_choice_button_open = 1.0 }
					}
					else = {
						set_variable = { minister_choice_button_open = 1.0 }
					}
				}
			}
			head_of_government_portrait_click = {
				if = {
					limit = {
						check_variable = { minister_choice_button_open = 2 }
					}
					set_variable = { minister_choice_button_open = 0.0 } 
					else = {
						limit = {
							check_variable = { minister_choice_button_open = 1 }
						}
						set_variable = { minister_choice_button_open = 2.0 }
					}
					else = {
						set_variable = { minister_choice_button_open = 2.0 }
					}
				}
			}
		}
	}
	government_minister_choice = {
		context_type = player_context
		window_name = "government_minister_choice"
		visible = {
			check_variable = { 
				var = 0
				value = minister_choice_button_open
				compare = not_equals
			}
		}
		dynamic_lists = {
			minister_grid = {
				array = minister_array
				change_scope = yes
				entry_container = choose_minister_entry
			}
		}
		effects= {
			close_button_window_click = {
				set_variable = { minister_choice_button_open = 0.0 } 
			}
			button_add_right_click = {
				set_variable = { astolfo = 1.0 }
			}
			button_add_click = {
				if = {
					limit = {
						check_variable = { astolfo = 1 }
					}
					ROOT = {
						add_to_array = { prev.minister_array = astolfo } 
					}
				}
			}
			minister_assign_click = {
				random_country = {
					limit = {
						#only add if not player and not in array
						not = { is_in_array = { minister_array = astolfo } }
					}
					set_country_flag = has_minister_1
					remove_from_array = { 
						array = from.minister_array 
						index = i 
					}
				}
				
			}
			minister_fire_click = {
				remove_from_array = { 
					array = from.minister_array 
					index = i 
				}
			}
		}
		properties = {
			minister_astolfo = {
				image = "[Getministerportrait]"
				frame = 1
			}
		}
	}
}

